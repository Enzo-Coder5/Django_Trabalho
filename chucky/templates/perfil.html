{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
  <div class="card mx-auto shadow" style="max-width: 600px;">
    <div class="card-header bg-info text-white text-center">
      <h4>Meu Perfil</h4>
    </div>
    <div class="card-body">
      <p><strong>Usuário:</strong> {{ pessoa.usuario.username }}</p>
      <p><strong>Email:</strong> {{ pessoa.email|default:"(não informado)" }}</p>
      <p><strong>Nome:</strong> {{ pessoa.nome }}</p>
      <p><strong>CPF:</strong> {{ pessoa.cpf }}</p>
      <p><strong>RG:</strong> {{ pessoa.rg|default:"(não informado)" }}</p>
      <p><strong>Telefone:</strong> {{ pessoa.telefone|default:"(não informado)" }}</p>
      <p><strong>Data de nascimento:</strong> {{ pessoa.data_nascimento|date:"d/m/Y" }}</p>
      <p><strong>Tipo de usuário:</strong> {{ pessoa.tipo_usuario|title }}</p>
      <p><strong>Último login:</strong> {{ pessoa.usuario.last_login|date:"d/m/Y H:i" }}</p>
      <p><strong>Data de cadastro:</strong> {{ pessoa.usuario.date_joined|date:"d/m/Y H:i" }}</p>
    </div>
    <div class="card-footer text-center">
      <a href="{% url 'password_change' %}" class="btn btn-warning btn-sm">Alterar Senha</a>
      <form action="{% url 'logout' %}" method="post" class="d-inline">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger btn-sm">Sair</button>
      </form>
      <a href="{% url 'editar_pessoa' pessoa.id %}" class="btn btn-primary btn-sm mt-2">Editar Perfil</a>
    </div>
  </div>

  <div class="mt-4">
    <h5>Endereços</h5>
    {% if pessoa.enderecos.all %}
      {% for endereco in pessoa.enderecos.all %}
        <div class="card mb-2">
          <div class="card-body">
            <p><strong>Rua:</strong> {{ endereco.rua }}</p>
            <p><strong>Número:</strong> {{ endereco.numero }}</p>
            <p><strong>Bairro:</strong> {{ endereco.bairro }}</p>
            <p><strong>Cidade:</strong> {{ endereco.cidade }}</p>
            <p><strong>Estado:</strong> {{ endereco.estado }}</p>
            <p><strong>CEP:</strong> {{ endereco.cep }}</p>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <p class="text-muted">Nenhum endereço cadastrado.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
